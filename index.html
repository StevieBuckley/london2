<!DOCTYPE html>
<html>
<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <title>london2: what’s on</title>
  <link charset="utf-8" href="media/css/reset.css" media="screen" rel="stylesheet" type="text/css" />
  <link charset="utf-8" href="media/css/core.css" media="screen" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="media/js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      Date.prototype.endOfMonth = function() {
        var then = new Date();

        // Set the time as late as possible.
        then.setHours(23);
        then.setMinutes(59);
        then.setSeconds(59);
        then.setMilliseconds(999);

        // Work out the last day of the month.
        then.setDate(29);
        while(then.getMonth() == this.getMonth()) {
          then.setDate(then.getDate() + 1);
        }
        then.setDate(then.getDate() - 1);

        return then;
      }

      Date.prototype.startOfMonth = function() {
        var then = new Date(this);
        then.setHours(0);
        then.setMinutes(0);
        then.setSeconds(0);
        then.setMilliseconds(0);
        then.setDate(1);
        return then;
      }

      $(".events .when").each(function(index, element) {
        var when        = $(element),
            description = when.text(),
            now         = new Date(),
            offset      = /^(First|Second|Third|Fourth) /i,
            meetupDay   = / ((Mon|Tues|Wednes|Thurs|Fri|Sat|Sun)day)$/i,
            dayNumber  = { 'sunday': 0, 'monday': 1, 'tuesday': 2, 'wednesday': 3, 'thursday': 4, 'friday': 5, 'saturday': 6},
            modifierNumber = { 'first': 0, 'second': 1, 'third': 2, 'fourth': 3 };
        if(offset.test(description)) {
          var modifiers = offset.exec(description),
              modifierName = modifiers[1].toLowerCase(),
              modifier  = modifierNumber[modifierName],
              days      = meetupDay.exec(description),
              dayName   = days[1].toLowerCase(),
              day       = dayNumber[dayName];
          countBackwards = new RegExp('^' + modifierName + ' Last ' + dayName + '$', 'i');
          if(countBackwards.test(description)) {
            var then = now.endOfMonth();
            while(true) {
              while(then.getDay() != day) {
                then.setDate(then.getDate() - 1);
              }
              for(var i = 0; i < modifier; i++) {
                then.setDate(then.getDate() - 7);
              }

              if(then.getTime() > now.getTime()) {
                break;
              }
              then.setMonth(then.getMonth() + 1);
              then = then.endOfMonth();
            }

            when.text('Next: ' + then.toDateString());
          } else {
            var then = now.startOfMonth();
            while(true) {
              while(then.getDay() != day) {
                then.setDate(then.getDate() + 1);
              }
              for(var i = 0; i < modifier; i++) {
                then.setDate(then.getDate() + 7);
              }

              if(then.getTime() > now.getTime()) {
                break;
              }
              then.setMonth(then.getMonth() + 1);
              then = then.startOfMonth();
            }

            when.text('Next: ' + then.toDateString());
          }
        }
      });
    });
  </script>

</head>
<body>

  <h1>london2: what’s on</h1>

  <ol class="events">
    <li class="lrug">
      <h2><a href="http://lrug.org/">LRUG</a></h2>
      <p class="who">Rubyists</p>
      <p class="when">Second Wednesday</p>
    </li>

    <li class="devops">
      <h2><a href="http://londondevops.org/meetings/">London DevOps</a></h2>
      <p class="who">Developers / Sysadmins</p>
      <p class="when">Monthly - no regular day</p>
    </li>

    <li class="javascripters">
      <h2><a href="http://javascript.meetup.com/3/">London Javascripters</a></h2>
      <p class="who">Javascript developers</p>
      <p class="when">Sporadic</p>
    </li>

    <li class="dotnet">
      <h2><a href="http://www.dnug.org.uk/">DNUG</a></h2>
      <p class="who">.NET developers</p>
      <p class="when">Monthly - no regular day</p>
    </li>

    <li class="lpm">
      <h2><a href="http://london.pm.org/">London Perl Mongers</a></h2>
      <p class="who">Perl developers</p>
      <p class="when">Day after first Wednesday<a href="http://london.pm.org/about/faq.html#heretics">*</a></p>
    </li>

    <li class="djugl">
      <h2><a href="http://groups.google.com/group/django-london">Django London</a></h2>
      <p class="who">Django developers</p>
      <p class="when">Monthly - no regular day</p>
    </li>

    <li class="lfpug">
      <h2><a href="http://www.lfpug.com/">LFPUG</a></h2>
      <p class="who">Flash developers</p>
      <p class="when">Monthly - no regular day</p>
    </li>

    <li class="phplondon">
      <h2><a href="http://phplondon.org/wiki/Main_Page">PHP London</a></h2>
      <p class="who">PHP developers</p>
      <p class="when">First Thursday</p>
    </li>

    <li class="gllug">
      <h2><a href="http://www.gllug.org.uk/">GLLUG</a></h2>
      <p class="who">Linux users</p>
      <p class="when">Sporadic</p>
    </li>

    <li class="lmug">
      <h2><a href="http://www.lmug.org.uk/">LMUG</a></h2>
      <p class="who">Mac users</p>
      <p class="when">Second Monday</p>
    </li>

    <li class="wlbcs">
      <h2><a href="http://www.westlondon.bcs.org/events.php">West London BCS</a></h2>
      <p class="who">IT practitioners</p>
      <p class="when">Second Tuesday</p>
    </li>

    <li class="lhug">
      <h2><a href="http://www.londonhug.net/">λondon HUG</a></h2>
      <p class="who">Haskell Developers</p>
      <p class="when">Sporadic</p>
    </li>

    <li class="erlangers">
      <h2><a href="http://www.meetup.com/erlangusergroup/">Erlangers</a></h2>
      <p class="who">Erlang Developers</p>
      <p class="when">Sporadic</p>
    </li>

    <li class="lsug">
      <h2><a href="http://www.meetup.com/london-scala/">LSUG</a></h2>
      <p class="who">Scala Developers</p>
      <p class="when">8th</p>
    </li>

    <li class="lfdnd">
      <h2><a href="http://flash.meetup.com/130/">LFD&amp;D</a></h2>
      <p class="who">Flash Developers/Designers</p>
      <p class="when">Third Thursday</p>
    </li>

    <li class="flug">
      <h2><a href="http://www.meetup.com/flexlondon/">FLUG</a></h2>
      <p class="who">Flex Developers</p>
      <p class="when">Second Last Tuesday</p>
    </li>

    <li class="pubstandards">
      <h2><a href="http://www.pubstandards.co.uk/">Pub Standards</a></h2>
      <p class="who">Web Developers &amp Drinkers</p>
      <p class="when">Middle Thursday<a href="http://www.pubstandards.co.uk/#next">*</a></p>
    </li>

    <li class="add_event">
      <h2><a href="mailto:craig@barkingiguana.com">Add Your Event</a></h2>
    </li>
  </ol>

  <p class="footer">Idea stolen from <a href="http://edinburgh2.com/">edinburgh2.com</a> which is a <a href="http://sneeu.com/">sneeu.com</a> thing. London2.org is maintained by <a href="http://barkingiguana.com/">Craig Webster</a>. If I got some details wrong it'd be great if you <a href="mailto:craig@barkingiguana.com">let me know</a>.</p>

  <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-1576507-3");
    pageTracker._trackPageview();
    } catch(err) {}</script>

  </body>
  </html>
